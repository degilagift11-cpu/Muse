<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pour Toi, Mon Amour</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root { --red-pass: #b71c1c; }

        body {
            margin: 0; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background-color: var(--red-pass);
            background-size: cover; background-position: center;
            font-family: 'Dancing Script', cursive;
            overflow: hidden; color: white;
            transition: background 2s ease-in-out, background-color 5s ease-in-out;
            animation: breathe 8s infinite alternate;
        }

        @keyframes breathe {
            0% { background-color: #b71c1c; }
            100% { background-color: #7f0000; }
        }

        /* Bouton Initial Rose */
        #mainButton {
            padding: 20px 40px; font-size: 1.8rem;
            background-color: #ff80ab; color: white;
            border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            z-index: 100; font-family: 'Dancing Script', cursive;
            transition: transform 0.3s;
        }
        #mainButton:hover { transform: scale(1.1); }

        /* Conteneur Principal */
        #heartContainer { position: relative; display: none; z-index: 5; text-align: center; transition: opacity 3s; }
        
        #heart {
            font-size: 100px; color: #ffd700; /* Dor√© */
            filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #names { font-size: 3rem; margin-top: 10px; text-shadow: 2px 2px 10px rgba(0,0,0,0.7); }
        
        #message { 
            font-size: 1.8rem; margin-top: 15px; min-height: 80px; 
            text-align: center; max-width: 85vw; 
            text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
            transition: color 5s ease-in-out;
        }

        /* Boutons Actions */
        .btn-action {
            margin: 10px; padding: 10px 20px;
            background: #ffd700; color: #b71c1c;
            border: none; border-radius: 20px;
            font-weight: bold; cursor: pointer;
            display: none; font-family: 'Dancing Script', cursive; font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        #voiceButton {
            background: transparent; color: #ffcdd2; border: 1px solid #ffcdd2;
            animation: pulse 2s infinite;
        }

        /* Compteur */
        #counter {
            position: fixed; bottom: 20px; font-size: 1.1rem;
            background: rgba(0, 0, 0, 0.4); padding: 8px 15px;
            border-radius: 20px; display: none; z-index: 10;
        }

        /* Animations & Particules */
        .particle { position: absolute; top: 50%; left: 50%; width: 6px; height: 6px; background: #fff59d; border-radius: 50%; pointer-events: none; }
        #flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; opacity: 0; pointer-events: none; z-index: 200; }
        .falling-heart { position: fixed; top: -20px; color: #ff4081; z-index: 1; animation: fall linear forwards; }
        
        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes flashAnim { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }
        .zoom-heart { transform: scale(1.3); }
    </style>
</head>
<body>

    <button id="mainButton">Clique,Muse ‚ù§Ô∏è</button>
    
    <audio id="bgMusic" loop>
        <source src="love.mp3" type="audio/mpeg">
    </audio>

    <audio id="secretVoice">
        <source src="ma-voix.mp3" type="audio/mpeg">
    </audio>

    <div id="flash"></div>
    
    <div id="heartContainer">
        <div id="heart">‚ù§</div>
        <div id="names">Babe & Mamour</div>
        <div id="message"></div>
        <button id="whyButton" class="btn-action">Chaque fois que tu touches ici il y a une raison de‚Ä¶<br>Pourquoi je t'aime ? ‚ú®</button><br>
        <button id="voiceButton" class="btn-action">Appuie ici si tu veux entendre quelque chose‚Ä¶ üé§<br>Et mets d'abord les √©couteurs‚Ä¶ üéß</button>
    </div>

    <div id="counter"></div>

    <script>
        // --- CONFIGURATION ---
        const phrases = [
            "Chaque jour √† tes c√¥t√©s est un cadeau...",
            "Tu es ma plus belle aventure.",
            "Mon c≈ìur ne bat plus que pour toi.",
            "Je t'aime plus que les mots ne peuvent le dire."
        ];

        const epilogue = [
            "Et si je devais tout recommencer‚Ä¶",
            "Je te choisirais encore. ‚ù§Ô∏è",
            "Dans tout l‚Äôunivers, il n‚Äôy a que toi."
        ];

        const raisons = [
            "Pour ton sourire qui illumine mes journ√©es.",
            "Parce que tu es ma meilleure amie et mon grand amour.",
            "Pour ta patience et ta douceur.",
            "Simplement pour qui tu es avec moi."
        ];

        const images = [
            '1.jpeg',
            '2.jpeg',
            '3.jpeg'
        ];

        // Date de rencontre : 15 Avril 2024
        const dateRencontre = new Date(2024, 3, 15); 

        // El√©ments DOM
        const btn = document.getElementById('mainButton');
        const heartContainer = document.getElementById('heartContainer');
        const heart = document.getElementById('heart');
        const message = document.getElementById('message');
        const whyBtn = document.getElementById('whyButton');
        const voiceBtn = document.getElementById('voiceButton');
        const music = document.getElementById('bgMusic');
        const voiceAudio = document.getElementById('secretVoice');
        const counter = document.getElementById('counter');
        const flash = document.getElementById('flash');

        // --- EVENEMENT CLIC ---
        btn.addEventListener('click', () => {
            music.play();
            btn.style.display = 'none';
            flash.style.animation = 'flashAnim 0.6s ease-out';

            setTimeout(() => {
                heartContainer.style.display = 'block';
                counter.style.display = 'block';
                startDiaporama();
                startFallingHearts();
                updateCounter();
                displayPhrases();
            }, 300);
        });

        // --- MACHINE A ECRIRE ---
        function typeWriter(text, i, fnCallback) {
            if (i < text.length) {
                message.innerHTML = text.substring(0, i+1) + '<span style="color:gold">|</span>';
                setTimeout(() => typeWriter(text, i + 1, fnCallback), 60);
            } else if (typeof fnCallback == 'function') {
                setTimeout(fnCallback, 1000);
            }
        }

        // --- LOGIQUE DES TEXTES ---
        function displayPhrases() {
            let index = 0;
            const next = () => {
                if (index < phrases.length) {
                    heart.classList.add('zoom-heart');
                    createBurst();
                    typeWriter(phrases[index], 0, () => {
                        setTimeout(() => {
                            heart.classList.remove('zoom-heart');
                            index++;
                            setTimeout(next, 2000);
                        }, 1500);
                    });
                } else {
                    displayEpilogue();
                }
            };
            next();
        }

        function displayEpilogue() {
            let eIndex = 0;
            const nextE = () => {
                if (eIndex < epilogue.length) {
                    heart.classList.add('zoom-heart');
                    setTimeout(() => heart.classList.remove('zoom-heart'), 500);
                    typeWriter(epilogue[eIndex], 0, () => {
                        setTimeout(() => {
                            eIndex++;
                            setTimeout(nextE, 2000);
                        }, 2000);
                    });
                } else {
                    whyBtn.style.display = 'inline-block';
                    voiceBtn.style.display = 'inline-block';
                    setTimeout(finalTransition, 30000); // 30 secondes avant le noir
                }
            };
            nextE();
        }

        // --- TRANSITION FINALE ---
        function finalTransition() {
            document.body.style.backgroundImage = "none";
            document.body.style.backgroundColor = "black";
            heartContainer.style.opacity = "0.3";
            counter.style.display = "none";
            music.volume = 0.3;
            message.style.color = "white";
            message.innerText = "Pour toujours... ‚ù§Ô∏è";
        }

        // --- FONCTIONS SECONDAIRES ---
        function updateCounter() {
            setInterval(() => {
                const diff = new Date() - dateRencontre;
                const j = Math.floor(diff / 86400000);
                const h = Math.floor((diff / 3600000) % 24);
                const m = Math.floor((diff / 60000) % 60);
                const s = Math.floor((diff / 1000) % 60);
                counter.innerHTML = `Ensemble depuis : ${j}j ${h}h ${m}m ${s}s`;
            }, 1000);
        }

        function startDiaporama() {
            const changeImg = () => {
                let url = images[Math.floor(Math.random() * images.length)];
                document.body.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${url}')`;
            };
            changeImg();
            setInterval(changeImg, 6000);
        }

        whyBtn.addEventListener('click', () => {
            createBurst();
            const r = raisons[Math.floor(Math.random() * raisons.length)];
            message.innerHTML = "";
            typeWriter(r, 0);
        });

        voiceBtn.addEventListener('click', () => {
            music.volume = 0.2;
            voiceAudio.play();
            voiceAudio.onended = () => { music.volume = 1.0; };
        });

        function createBurst() {
            for (let i = 0; i < 15; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                heartContainer.appendChild(p);
                const a = (i / 15) * Math.PI * 2;
                const v = 80 + Math.random() * 50;
                p.animate([
                    { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
                    { transform: `translate(calc(-50% + ${Math.cos(a)*v}px), calc(-50% + ${Math.sin(a)*v}px)) scale(0)`, opacity: 0 }
                ], { duration: 1000 });
                setTimeout(() => p.remove(), 1000);
            }
        }

        function startFallingHearts() {
            setInterval(() => {
                const h = document.createElement('div');
                h.classList.add('falling-heart');
                h.innerHTML = '‚ù§Ô∏èJe t"aimeüåπ';
                h.style.left = Math.random() * 100 + 'vw';
                h.style.fontSize = (Math.random() * 20 + 15) + 'px';
                h.style.animationDuration = (Math.random() * 3 + 3) + 's';
                document.body.appendChild(h);
                setTimeout(() => h.remove(), 6000);
            }, 300);
        }
    </script>
</body>
</html>